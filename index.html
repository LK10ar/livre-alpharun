<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livre Alpharun</title>
    
   <link rel="icon" type="image/png" href="images/IMG_1084.png"> 
    <link rel="stylesheet" href="styles.css"> 
   
</head>
<body>
    
    <div id="cover-page">
        <p>clique pour entrée...</p>
    </div>

    <video autoplay muted loop playsinline id="background-video">
        <source src="image/video.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la balise vidéo.
    </video>
    
    <div class="book-container">
        
        <div class="book" id="book">
            
            <div class="page" id="p1">
                <div class="page-content">
                    <img src="image/livre%20parkour.jpg" alt="Couverture du livre de Parkour">
                </div>
            </div>
            
           <div class="page" id="p2"><div class="page-content"><img src="image/livre%20parkour2.jpg" alt="Page 2"></div></div> 
            <div class="page" id="p3"><div class="page-content"><img src="image/livre%20parkour3.jpg" alt="Page 3"></div></div>
            <div class="page" id="p4"><div class="page-content"><img src="image/livre%20parkour4.jpg" alt="Page 4"></div></div>
            <div class="page" id="p5"><div class="page-content"><img src="image/livre%20parkour5.jpg" alt="Page 5"></div></div>
            <div class="page" id="p6"><div class="page-content"><img src="image/livre%20parkour6.jpg" alt="Page 6"></div></div>
            <div class="page" id="p7"><div class="page-content"><img src="image/livre%20parkour7.jpg" alt="Page 7"></div></div>
            <div class="page" id="p8"><div class="page-content"><img src="image/livre%20parkour8.jpg" alt="Page 8"></div></div>
            <div class="page" id="p9"><div class="page-content"><img src="image/livre%20parkour9.jpg" alt="Page 9"></div></div>
            <div class="page" id="p10"><div class="page-content"><img src="image/livre%20parkour10.jpg" alt="Page 10"></div></div>
            <div class="page" id="p11"><div class="page-content"><img src="image/livre%20parkour11.jpg" alt="Page 11"></div></div>
            <div class="page" id="p12"><div class="page-content"><img src="image/livre%20parkour12.jpg" alt="Page 12"></div></div>
            <div class="page" id="p13"><div class="page-content"><img src="image/livre%20parkour13.jpg" alt="Page 13"></div></div>
            <div class="page" id="p14"><div class="page-content"><img src="image/livre%20parkour14.jpg" alt="Page 14"></div></div>
            <div class="page" id="p15"><div class="page-content"><img src="image/livre%20parkour15.jpg" alt="Page 15"></div></div>
            <div class="page" id="p16"><div class="page-content"><img src="image/livre%20parkour16.jpg" alt="Page 16"></div></div>
            <div class="page" id="p17"><div class="page-content"><img src="image/livre%20parkour17.jpg" alt="Page 17"></div></div>
            <div class="page" id="p18"><div class="page-content"><img src="image/livre%20parkour18.jpg" alt="Page 18"></div></div>
            <div class="page" id="p19"><div class="page-content"><img src="image/livre%20parkour19.jpg" alt="Page 19"></div></div>
            <div class="page" id="p20"><div class="page-content"><img src="image/livre%20parkour20.jpg" alt="Page 20"></div></div>
            <div class="page" id="p21"><div class="page-content"><img src="image/livre%20parkour21.jpg" alt="Page 21"></div></div>
            <div class="page" id="p22"><div class="page-content"><img src="image/livre%20parkour22.jpg" alt="Page 22"></div></div>
            <div class="page" id="p23"><div class="page-content"><img src="image/livre%20parkour23.jpg" alt="Page 23"></div></div>
            <div class="page" id="p24"><div class="page-content"><img src="image/livre%20parkour24.jpg" alt="Page 24"></div></div>
            <div class="page" id="p25"><div class="page-content"><img src="image/livre%20parkour25.jpg" alt="Page 25"></div></div>
            <div class="page" id="p26"><div class="page-content"><img src="image/livre%20parkour26.jpg" alt="Page 26"></div></div>
            <div class="page" id="p27"><div class="page-content"><img src="image/livre%20parkour27.jpg" alt="Page 27"></div></div>
            <div class="page" id="p28"><div class="page-content"><img src="image/livre%20parkour28.jpg" alt="Page 28"></div></div>
            <div class="page" id="p29"><div class="page-content"><img src="image/livre%20parkour29.jpg" alt="Page 29"></div></div>
            <div class="page" id="p30"><div class="page-content"><img src="image/livre%20parkour29.jpg" alt="Page 30"></div></div>
            <div class="page" id="p31"><div class="page-content"><img src="image/livre%20parkour30.jpg" alt="Page 31"></div></div>
            <div class="page" id="p32"><div class="page-content"><img src="image/livre%20parkour31.jpg" alt="Page 32"></div></div>
            <div class="page" id="p33"><div class="page-content"><img src="image/livre%20parkour32.jpg" alt="Page 33"></div></div>
            <div class="page" id="p34"><div class="page-content"><img src="image/livre%20parkour33.jpg" alt="Page 34"></div></div>
            <div class="page" id="p35"><div class="page-content"><img src="image/livre%20parkour34.jpg" alt="Page 35"></div></div>
            <div class="page" id="p36"><div class="page-content"><img src="image/livre%20parkour35.jpg" alt="Page 36"></div></div>
            <div class="page" id="p37"><div class="page-content"><img src="image/livre%20parkour36.jpg" alt="Page 37"></div></div>
            <div class="page" id="p38"><div class="page-content"><img src="image/livre%20parkour37.jpg" alt="Page 38"></div></div>
            <div class="page" id="p39"><div class="page-content"><img src="image/livre%20parkour38.jpg" alt="Page 39"></div></div>
            <div class="page" id="p40"><div class="page-content"><img src="image/livre%20parkour39.jpg" alt="Page 40"></div></div>
            <div class="page" id="p41"><div class="page-content"><img src="image/livre%20parkour40.jpg" alt="Page 41"></div></div>
            <div class="page" id="p42"><div class="page-content"><img src="image/livre%20parkour41.jpg" alt="Page 42"></div></div>
            <div class="page" id="p43"><div class="page-content"><img src="image/livre%20parkour42.jpg" alt="Page 43"></div></div>
            <div class="page" id="p44"><div class="page-content"><img src="image/livre%20parkour43.jpg" alt="Page 44"></div></div>
            <div class="page" id="p45"><div class="page-content"><img src="image/livre%20parkour44.jpg" alt="Page 45"></div></div>
            <div class="page" id="p46"><div class="page-content"><img src="image/livre%20parkour45.jpg" alt="Page 46"></div></div>
            <div class="page" id="p47"><div class="page-content"><img src="image/livre%20parkour46.jpg" alt="Page 47"></div></div>
            <div class="page" id="p48"><div class="page-content"><img src="image/livre%20parkour47.jpg" alt="Page 48"></div></div>
            <div class="page" id="p49"><div class="page-content"><img src="image/livre%20parkour48.jpg" alt="Page 49"></div></div>
            <div class="page" id="p50"><div class="page-content"><img src="image/livre%20parkour49.jpg" alt="Page 50"></div></div>
            <div class="page" id="p51"><div class="page-content"><img src="image/livre%20parkour50.jpg" alt="Page 51"></div></div>
            <div class="page" id="p52"><div class="page-content"><img src="image/livre%20parkour51.jpg" alt="Page 52"></div></div>
            
            <div class="page" id="p53">
                <div class="page-content">
                    <img src="image/livre%20parkour52.jpg" alt="Dos du livre">
                </div>
            </div>
            
        </div>
            
        </div>
        
        <div class="nav-buttons">
            <button id="prev-btn">◀ Page précédente</button>
            <button id="next-btn">Page suivante ▶</button>
        </div>

    </div>

    <audio id="background-audio" loop>
        <source src="image/music.mp3" type="audio/mp3">
        Votre navigateur ne supporte pas la balise audio.
    </audio>
    
    <div id="volume-control-wrapper">
        
        <img id="volume-mute-toggle" src="image/IMG_2069.png" alt="Contrôle Volume">
        
        <div id="volume-slider-bar">
             <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5">
        </div>
    </div>

    <script>
        const audio = document.getElementById('background-audio');
        const coverPage = document.getElementById('cover-page');
        const volumeMuteToggle = document.getElementById('volume-mute-toggle'); 
        const volumeSlider = document.getElementById('volume-slider');
        
        // Chemins des icônes
        const ICON_ON = 'image/IMG_2069.png';
        const ICON_MUTE = 'image/IMG_2068.png';
        
        audio.volume = 0.5; 
        let lastVolume = 0.5;
        
        // **********************************
        // 1. GESTION DE L'ENTRÉE ET DE L'AUDIO
        // **********************************
        
        function enterPage() {
            // 1. Démarrer la musique
            // On tente le play() suite à l'interaction utilisateur (clic/toucher)
            audio.play().then(() => {
                // Si la lecture réussit, on retire le mute (si le navigateur l'a mis automatiquement)
                audio.muted = false; 
            }).catch(error => {
                console.error("Échec du lancement audio après le clic.", error);
            });
            
            // 2. Masquer la page de couverture
            coverPage.style.opacity = '0';
            setTimeout(() => {
                coverPage.style.display = 'none';
            }, 500);

            // 3. Retirer les écouteurs pour ne pas rejouer
            coverPage.removeEventListener('click', enterPage);
            coverPage.removeEventListener('touchstart', enterPage);
        }

        // 🚨 IMPORTANT : On mute l'audio par défaut en JS pour être sûr, si vous voulez qu'il soit muet avant l'entrée.
        audio.muted = true; 
        
        coverPage.addEventListener('click', enterPage);
        coverPage.addEventListener('touchstart', enterPage);
        
        // **********************************
        // 2. GESTION DU VOLUME ET DU MUTE
        // **********************************
        
        volumeSlider.addEventListener('input', (e) => {
            const newVolume = parseFloat(e.target.value);
            audio.volume = newVolume;
            
            audio.muted = false; // Unmute si on bouge le slider
            
            volumeMuteToggle.src = newVolume > 0 ? ICON_ON : ICON_MUTE;
            
            // On enregistre lastVolume seulement si l'audio est audible
            if (newVolume > 0) {
                lastVolume = newVolume;
            }
        });

        volumeMuteToggle.addEventListener('click', () => {
            if (audio.muted) {
                // Unmute : Rétablir le dernier volume connu (ou 0.5 si le dernier était 0)
                audio.volume = lastVolume > 0 ? lastVolume : 0.5;
                volumeSlider.value = audio.volume;
                audio.muted = false;
                volumeMuteToggle.src = ICON_ON;
            } else {
                // Mute : Enregistrer le volume actuel et le couper
                lastVolume = audio.volume; 
                audio.muted = true;
                volumeSlider.value = 0;
                volumeMuteToggle.src = ICON_MUTE;
            }
        });
    </script>
    <script src="script.js"></script> 
</body>
</html>
